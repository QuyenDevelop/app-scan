import { ScreenUtils } from "@helpers";
import { useShow } from "@hooks";
import { CustomerResponse } from "@models";
import { ChooseCustomerModal, Icon, translate } from "@shared";
import { Metrics, Themes } from "@themes";
import React, { FunctionComponent } from "react";
import { Text, TouchableOpacity, View } from "react-native";
import styles from "../styles";

export interface Props {
  shipmentTitle: String;
  customerTitle: String;
  selectCustomer: (customer: CustomerResponse) => void;
  customer: CustomerResponse | undefined;
}

export const ShipmentHeader: FunctionComponent<Props> = (props: Props) => {
  const { shipmentTitle, customer, selectCustomer, customerTitle } = props;
  const [isShowCustomerModal, showCustomerModal, hideCustomerModal] = useShow();
  return (
    <View style={[styles.subShipmentContainer, styles.generalInfoRow]}>
      <View>
        <Text style={styles.labelInfo}>{shipmentTitle}</Text>
      </View>
      <View>
        <TouchableOpacity
          style={styles.locationButton}
          hitSlop={styles.hitSlop}
          onPress={showCustomerModal}
        >
          {customerTitle ? (
            <>
              <Text
                style={[
                  styles.labelInfo,
                  { marginRight: ScreenUtils.scale(8) },
                ]}
              >
                {customerTitle}
              </Text>
            </>
          ) : (
            <>
              <Text
                style={[
                  styles.labelInfo,
                  { marginRight: ScreenUtils.scale(8) },
                ]}
              >
                {translate("label.customer")}
              </Text>
              <Icon
                name="ic_arrow_down"
                size={Metrics.icons.smallSmall}
                color={Themes.colors.coolGray100}
              />
            </>
          )}
        </TouchableOpacity>
      </View>
      <ChooseCustomerModal
        isVisible={isShowCustomerModal}
        closeModal={hideCustomerModal}
        customer={customer}
        selectCustomer={selectCustomer}
      />
    </View>
  );
};
